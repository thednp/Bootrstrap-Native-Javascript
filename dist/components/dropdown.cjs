"use strict";const t=require("./base-component-DMuoZh8G.js"),et=require("./index-DZ0WJZhO.js"),f=require("./showClass-D_Ms1FgG.js"),k=require("./dataBsToggle-Dj-Ng54N.js"),C=require("./dropdownClasses-CnEyz_iw.js"),nt=require("./isDisabled-BhBg0EpT.js"),z="Dropdown",U="dropdown-menu",X=o=>{const e=t.Se(o,"A");return o.tagName==="A"&&t.ee(o,"href")&&t.j(o,"href")?.slice(-1)==="#"||e&&t.ee(e,"href")&&t.j(e,"href")?.slice(-1)==="#"},[p,T,q,A]=C.dropdownMenuClasses,ot=`[${k.dataBsToggle}="${p}"]`,h=o=>t.Xn(o,z),st=o=>new Q(o),rt=`${U}-end`,W=[p,T],_=[q,A],F=["A","BUTTON"],it={offset:5,display:"dynamic"},y=t.po(`show.bs.${p}`),L=t.po(`shown.bs.${p}`),S=t.po(`hide.bs.${p}`),N=t.po(`hidden.bs.${p}`),J=t.po(`updated.bs.${p}`),K=o=>{const{element:e,menu:n,parentElement:d,options:r}=o,{offset:s}=r;if(t.f(n,"position")==="static")return;const i=t.Bo(e),c=t.Gn(n,rt);["margin","top","bottom","left","right"].forEach(a=>{const I={};I[a]="",t.vo(n,I)});let l=C.dropdownMenuClasses.find(a=>t.Gn(d,a))||p;const V={dropdown:[s,0,0],dropup:[0,0,s],dropstart:i?[-1,0,0,s]:[-1,s,0],dropend:i?[-1,s,0]:[-1,0,0,s]},g={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:i?{left:"100%",right:"auto"}:{left:"auto",right:"100%"},dropend:i?{left:"auto",right:"100%"}:{left:"100%",right:"auto"},menuStart:i?{right:"0",left:"auto"}:{right:"auto",left:"0"},menuEnd:i?{right:"auto",left:"0"}:{right:"0",left:"auto"}},{offsetWidth:m,offsetHeight:D}=n,{clientWidth:P,clientHeight:G}=t.w(e),{left:w,top:b,width:H,height:Y}=t.y(e),$=w-m-s<0,x=w+m+H+s>=P,Z=b+D+s>=G,j=b+D+Y+s>=G,B=b-D-s<0,E=(!i&&c||i&&!c)&&w+H-m<0,v=(i&&c||!i&&!c)&&w+m>=P;if(_.includes(l)&&$&&x&&(l=p),l===q&&(i?x:$)&&(l=A),l===A&&(i?$:x)&&(l=q),l===T&&B&&!j&&(l=p),l===p&&j&&!B&&(l=T),_.includes(l)&&Z&&t.C(g[l],{top:"auto",bottom:0}),W.includes(l)&&(E||v)){let a={left:"auto",right:"auto"};!E&&v&&!i&&(a={left:"auto",right:0}),E&&!v&&i&&(a={left:0,right:"auto"}),a&&t.C(g[l],a)}const tt=V[l];if(t.vo(n,{...g[l],margin:`${tt.map(a=>a&&`${a}px`).join(" ")}`}),W.includes(l)&&c&&c){const a=!i&&E||i&&v?"menuStart":"menuEnd";t.vo(n,g[a])}t.G(d,J)},dt=o=>Array.from(o.children).map(e=>{if(e&&F.includes(e.tagName))return e;const{firstElementChild:n}=e;return n&&F.includes(n.tagName)?n:null}).filter(e=>e),O=o=>{const{element:e,options:n,menu:d}=o,r=o.open?t.E:t.r,s=t.d(e);r(s,t.gt,R),r(s,t.st,R),r(s,t.lt,lt),r(s,t.ft,at),n.display==="dynamic"&&(o.open?o._observer.observe(d):o._observer.disconnect())},M=o=>{const e=[...C.dropdownMenuClasses,"btn-group","input-group"].map(n=>t.Ro(`${n} ${f.showClass}`,t.d(o))).find(n=>n.length);if(e&&e.length)return[...e[0].children].find(n=>C.dropdownMenuClasses.some(d=>d===t.j(n,k.dataBsToggle)))},R=o=>{const{target:e,type:n}=o;if(!t.b(e))return;const d=M(e),r=d&&h(d);if(!r)return;const{parentElement:s,menu:i}=r,c=s&&s.contains(e)&&(e.tagName==="form"||t.Se(e,"form")!==null);[t.gt,t.vt].includes(n)&&X(e)&&o.preventDefault(),!c&&n!==t.st&&e!==d&&e!==i&&r.hide()};function ct(o){const e=h(this);nt.isDisabled(this)||e&&(o.stopPropagation(),e.toggle(),X(this)&&o.preventDefault())}const lt=o=>{[t.en,t.nn].includes(o.code)&&o.preventDefault()};function at(o){const{code:e}=o,n=M(this);if(!n)return;const d=h(n),{activeElement:r}=t.d(n);if(!d||!r)return;const{menu:s,open:i}=d,c=dt(s);if(c&&c.length&&[t.en,t.nn].includes(e)){let u=c.indexOf(r);r===n?u=0:e===t.nn?u=u>1?u-1:0:e===t.en&&(u=u<c.length-1?u+1:u),c[u]&&t.ro(c[u])}t.fn===e&&i&&(d.toggle(),t.ro(n))}class Q extends t.BaseComponent{static selector=ot;static init=st;static getInstance=h;constructor(e,n){super(e,n);const{parentElement:d}=this.element,[r]=t.Ro(U,d);r&&(this.parentElement=d,this.menu=r,this._observer=new et.v(()=>K(this)),this._toggleEventListeners(!0))}get name(){return z}get defaults(){return it}toggle(){this.open?this.hide():this.show()}show(){const{element:e,open:n,menu:d,parentElement:r}=this;if(n)return;const s=M(e),i=s&&h(s);i&&i.hide(),[y,L,J].forEach(c=>{c.relatedTarget=e}),t.G(r,y),!y.defaultPrevented&&(t.Kn(d,f.showClass),t.Kn(r,f.showClass),t.Wn(e,t.De,"true"),K(this),this.open=!n,t.ro(e),O(this),t.G(r,L))}hide(){const{element:e,open:n,menu:d,parentElement:r}=this;n&&([S,N].forEach(s=>{s.relatedTarget=e}),t.G(r,S),!S.defaultPrevented&&(t.qn(d,f.showClass),t.qn(r,f.showClass),t.Wn(e,t.De,"false"),this.open=!n,O(this),t.G(r,N)))}_toggleEventListeners=e=>{(e?t.E:t.r)(this.element,t.gt,ct)};dispose(){this.open&&this.hide(),this._toggleEventListeners(),super.dispose()}}module.exports=Q;
//# sourceMappingURL=dropdown.cjs.map
