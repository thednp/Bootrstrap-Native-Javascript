"use strict";const t=require("./base-component-DMuoZh8G.js"),f=require("./activeClass-CxJYQAGN.js"),T=require("./getTargetElement-DananmHP.js"),B=require("./isDisabled-BhBg0EpT.js"),x="carousel",X="Carousel",b=`[data-bs-ride="${x}"]`,h=`${x}-item`,y="data-bs-slide-to",m="data-bs-slide",p="paused",q={pause:"hover",keyboard:!1,touch:!0,interval:5e3},g=n=>t.Xn(n,X),R=n=>new L(n);let $=0,C=0,E=0;const H=t.po(`slide.bs.${x}`),A=t.po(`slid.bs.${x}`),D=n=>{const{index:i,direction:e,element:s,slides:a,options:c}=n;if(n.isAnimating){const r=K(n),o=e==="left"?"next":"prev",d=e==="left"?"start":"end";t.Kn(a[i],f.activeClass),t.qn(a[i],`${h}-${o}`),t.qn(a[i],`${h}-${d}`),t.qn(a[r],f.activeClass),t.qn(a[r],`${h}-${d}`),t.G(s,A),t.bo.clear(s,m),n.cycle&&!t.d(s).hidden&&c.interval&&!n.isPaused&&n.cycle()}};function w(){const n=g(this);n&&!n.isPaused&&!t.bo.get(this,p)&&t.Kn(this,p)}function N(){const n=g(this);n&&n.isPaused&&!t.bo.get(this,p)&&n.cycle()}function O(n){n.preventDefault();const i=t.Se(this,b)||T.getTargetElement(this),e=i&&g(i);if(B.isDisabled(this)||!e||e.isAnimating)return;const s=+(t.j(this,y)||0);this&&!t.Gn(this,f.activeClass)&&!Number.isNaN(s)&&e.to(s)}function k(n){n.preventDefault();const i=t.Se(this,b)||T.getTargetElement(this),e=i&&g(i);if(B.isDisabled(this)||!e||e.isAnimating)return;const s=t.j(this,m);s==="next"?e.next():s==="prev"&&e.prev()}const _=({code:n,target:i})=>{const e=t.d(i),[s]=[...t.ue(b,e)].filter(d=>t.To(d)),a=g(s);if(!a||a.isAnimating||/textarea|input|select/i.test(i.nodeName))return;const c=t.Bo(s),r=c?t.on:t.sn,o=c?t.sn:t.on;n===o?a.prev():n===r&&a.next()};function S(n){const{target:i}=n,e=g(this);e&&e.isTouch&&(e.indicator&&!e.indicator.contains(i)||!e.controls.includes(i))&&(n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault())}function j(n){const{target:i}=n,e=g(this);if(!e||e.isAnimating||e.isTouch)return;const{controls:s,indicators:a}=e;[...s,...a].every(c=>c===i||c.contains(i))||($=n.pageX,this.contains(i)&&(e.isTouch=!0,G(e,!0)))}const M=n=>{C=n.pageX},U=n=>{const{target:i}=n,e=t.d(i),s=[...t.ue(b,e)].map(o=>g(o)).find(o=>o.isTouch);if(!s)return;const{element:a,index:c}=s,r=t.Bo(a);E=n.pageX,s.isTouch=!1,G(s),!e.getSelection()?.toString().length&&a.contains(i)&&Math.abs($-E)>120&&(C<$?s.to(c+(r?-1:1)):C>$&&s.to(c+(r?1:-1))),$=0,C=0,E=0},I=(n,i)=>{const{indicators:e}=n;[...e].forEach(s=>t.qn(s,f.activeClass)),n.indicators[i]&&t.Kn(e[i],f.activeClass)},G=(n,i)=>{const{element:e}=n,s=i?t.E:t.r;s(t.d(e),t.Ot,M,t.go),s(t.d(e),t.xt,U,t.go)},K=n=>{const{slides:i,element:e}=n,s=t.Ho(`.${h}.${f.activeClass}`,e);return s?[...i].indexOf(s):-1};class L extends t.BaseComponent{static selector=b;static init=R;static getInstance=g;constructor(i,e){super(i,e);const{element:s}=this;this.direction=t.Bo(s)?"right":"left",this.isTouch=!1,this.slides=t.Ro(h,s);const{slides:a}=this;if(a.length<2)return;const c=K(this),r=[...a].find(u=>t.ve(u,`.${h}-next`));this.index=c;const o=t.d(s);this.controls=[...t.ue(`[${m}]`,s),...t.ue(`[${m}][${T.dataBsTarget}="#${s.id}"]`,o)].filter((u,v,l)=>v===l.indexOf(u)),this.indicator=t.Ho(`.${x}-indicators`,s),this.indicators=[...this.indicator?t.ue(`[${y}]`,this.indicator):[],...t.ue(`[${y}][${T.dataBsTarget}="#${s.id}"]`,o)].filter((u,v,l)=>v===l.indexOf(u));const{options:d}=this;this.options.interval=d.interval===!0?q.interval:d.interval,r?this.index=[...a].indexOf(r):c<0&&(this.index=0,t.Kn(a[0],f.activeClass),this.indicators.length&&I(this,0)),this.indicators.length&&I(this,this.index),this._toggleEventListeners(!0),d.interval&&this.cycle()}get name(){return X}get defaults(){return q}get isPaused(){return t.Gn(this.element,p)}get isAnimating(){return t.Ho(`.${h}-next,.${h}-prev`,this.element)!==null}cycle(){const{element:i,options:e,isPaused:s,index:a}=this;t.bo.clear(i,x),s&&(t.bo.clear(i,p),t.qn(i,p)),t.bo.set(i,()=>{this.element&&!this.isPaused&&!this.isTouch&&t.To(i)&&this.to(a+1)},e.interval,x)}pause(){const{element:i,options:e}=this;this.isPaused||!e.interval||(t.Kn(i,p),t.bo.set(i,()=>{},1,p))}next(){this.isAnimating||this.to(this.index+1)}prev(){this.isAnimating||this.to(this.index-1)}to(i){const{element:e,slides:s,options:a}=this,c=K(this),r=t.Bo(e);let o=i;if(this.isAnimating||c===o||t.bo.get(e,m))return;c<o||c===0&&o===s.length-1?this.direction=r?"right":"left":(c>o||c===s.length-1&&o===0)&&(this.direction=r?"left":"right");const{direction:d}=this;o<0?o=s.length-1:o>=s.length&&(o=0);const u=d==="left"?"next":"prev",v=d==="left"?"start":"end",l={relatedTarget:s[o],from:c,to:o,direction:d};t.C(H,l),t.C(A,l),t.G(e,H),!H.defaultPrevented&&(this.index=o,I(this,o),t.ae(s[o])&&t.Gn(e,"slide")?t.bo.set(e,()=>{t.Kn(s[o],`${h}-${u}`),t.mo(s[o]),t.Kn(s[o],`${h}-${v}`),t.Kn(s[c],`${h}-${v}`),t.no(s[o],()=>this.slides&&this.slides.length&&D(this))},0,m):(t.Kn(s[o],f.activeClass),t.qn(s[c],f.activeClass),t.bo.set(e,()=>{t.bo.clear(e,m),e&&a.interval&&!this.isPaused&&this.cycle(),t.G(e,A)},0,m)))}_toggleEventListeners=i=>{const{element:e,options:s,slides:a,controls:c,indicators:r}=this,{touch:o,pause:d,interval:u,keyboard:v}=s,l=i?t.E:t.r;d&&u&&(l(e,t.ht,w),l(e,t.yt,N)),o&&a.length>2&&(l(e,t.Dt,j,t.go),l(e,t.Wt,S,{passive:!1}),l(e,t.Re,S,{passive:!1})),c.length&&c.forEach(P=>{l(P,t.gt,k)}),r.length&&r.forEach(P=>{l(P,t.gt,O)}),v&&l(t.d(e),t.lt,_)};dispose(){const{isAnimating:i}=this,e={...this,isAnimating:i};this._toggleEventListeners(),super.dispose(),e.isAnimating&&t.no(e.slides[e.index],()=>{D(e)})}}module.exports=L;
//# sourceMappingURL=carousel.cjs.map
