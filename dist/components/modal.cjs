"use strict";const e=require("./base-component-DMuoZh8G.js"),M=require("./dataBsToggle-Dj-Ng54N.js"),O=require("./dataBsDismiss-CMHF7If_.js"),k=require("./fadeClass-Co6nOzNJ.js"),d=require("./showClass-D_Ms1FgG.js"),l=require("./popupContainer-DsalI_IH.js"),a=require("./isVisible-D0QRTb09.js"),D=require("./getTargetElement-DananmHP.js"),q=require("./isDisabled-BhBg0EpT.js"),B=`.${l.modalString}`,F=`[${M.dataBsToggle}="${l.modalString}"]`,_=`[${O.dataBsDismiss}="${l.modalString}"]`,E=`${l.modalString}-static`,x={backdrop:!0,keyboard:!0},m=s=>e.Xn(s,a.modalComponent),I=s=>new G(s),p=e.po(`show.bs.${l.modalString}`),b=e.po(`shown.bs.${l.modalString}`),f=e.po(`hide.bs.${l.modalString}`),S=e.po(`hidden.bs.${l.modalString}`),$=s=>{const{element:t}=s,o=a.measureScrollbar(t),{clientHeight:n,scrollHeight:i}=e.w(t),{clientHeight:c,scrollHeight:g}=t,r=c!==g;if(!r&&o){const u={[e.Bo(t)?"paddingLeft":"paddingRight"]:`${o}px`};e.vo(t,u)}a.setScrollbar(t,r||n!==i)},H=(s,t)=>{const o=t?e.E:e.r,{element:n}=s;o(n,e.gt,K),o(e.d(n),e.lt,z),t?s._observer.observe(n):s._observer.disconnect()},w=s=>{const{triggers:t,element:o,relatedTarget:n}=s;a.removeOverlay(o),e.vo(o,{paddingRight:"",display:""}),H(s);const i=p.relatedTarget||t.find(a.isVisible);i&&e.ro(i),S.relatedTarget=n||void 0,e.G(o,S),e.yo(o)},T=s=>{const{element:t,relatedTarget:o}=s;e.ro(t),H(s,!0),b.relatedTarget=o||void 0,e.G(t,b),e.yo(t)},C=s=>{const{element:t,hasFade:o}=s;e.vo(t,{display:"block"}),$(s),a.getCurrentOpen(t)||e.vo(e.wo(t),{overflow:"hidden"}),e.Kn(t,d.showClass),e.Qn(t,e.$),e.Wn(t,e.ze,"true"),o?e.no(t,()=>T(s)):T(s)},y=s=>{const{element:t,options:o,hasFade:n}=s;o.backdrop&&n&&e.Gn(a.overlay,d.showClass)&&!a.getCurrentOpen(t)?(a.hideOverlay(),e.no(a.overlay,()=>w(s))):w(s)};function L(s){const t=D.getTargetElement(this),o=t&&m(t);q.isDisabled(this)||o&&(this.tagName==="A"&&s.preventDefault(),o.relatedTarget=this,o.toggle())}const z=({code:s,target:t})=>{const o=e.Ho(a.modalActiveSelector,e.d(t)),n=o&&m(o);if(!n)return;const{options:i}=n;i.keyboard&&s===e.fn&&e.Gn(o,d.showClass)&&(n.relatedTarget=null,n.hide())},K=s=>{const{currentTarget:t}=s,o=t&&m(t);if(!o||!t||e.bo.get(t))return;const{options:n,isStatic:i,modalDialog:c}=o,{backdrop:g}=n,{target:r}=s,h=e.d(t)?.getSelection()?.toString().length,u=c.contains(r),v=r&&e.Se(r,_);i&&!u?e.bo.set(t,()=>{e.Kn(t,E),e.no(c,()=>P(o))},17):(v||!h&&!i&&!u&&g)&&(o.relatedTarget=v||null,o.hide(),s.preventDefault())},P=s=>{const{element:t,modalDialog:o}=s,n=(e.ae(o)||0)+17;e.qn(t,E),e.bo.set(t,()=>e.bo.clear(t),n)};class G extends e.BaseComponent{static selector=B;static init=I;static getInstance=m;constructor(t,o){super(t,o);const{element:n}=this,i=e.Ho(`.${l.modalString}-dialog`,n);i&&(this.modalDialog=i,this.triggers=[...e.ue(F,e.d(n))].filter(c=>D.getTargetElement(c)===n),this.isStatic=this.options.backdrop==="static",this.hasFade=e.Gn(n,k.fadeClass),this.relatedTarget=null,this._observer=new ResizeObserver(()=>this.update()),this._toggleEventListeners(!0))}get name(){return a.modalComponent}get defaults(){return x}toggle(){e.Gn(this.element,d.showClass)?this.hide():this.show()}show(){const{element:t,options:o,hasFade:n,relatedTarget:i}=this,{backdrop:c}=o;let g=0;if(e.Gn(t,d.showClass)||(p.relatedTarget=i||void 0,e.G(t,p),p.defaultPrevented))return;const r=a.getCurrentOpen(t);if(r&&r!==t){const h=m(r)||e.Xn(r,a.offcanvasComponent);h&&h.hide()}c?(l.hasPopup(a.overlay)?a.toggleOverlayType(!0):a.appendOverlay(t,n,!0),g=e.ae(a.overlay),a.showOverlay(),setTimeout(()=>C(this),g)):(C(this),r&&e.Gn(a.overlay,d.showClass)&&a.hideOverlay())}hide(){const{element:t,hasFade:o,relatedTarget:n}=this;e.Gn(t,d.showClass)&&(f.relatedTarget=n||void 0,e.G(t,f),!f.defaultPrevented&&(e.qn(t,d.showClass),e.Wn(t,e.$,"true"),e.Qn(t,e.ze),o?e.no(t,()=>y(this)):y(this)))}update=()=>{e.Gn(this.element,d.showClass)&&$(this)};_toggleEventListeners=t=>{const o=t?e.E:e.r,{triggers:n}=this;n.length&&n.forEach(i=>{o(i,e.gt,L)})};dispose(){const t={...this},{modalDialog:o,hasFade:n}=t,i=()=>setTimeout(()=>super.dispose(),17);this.hide(),this._toggleEventListeners(),n?e.no(o,i):i()}}module.exports=G;
//# sourceMappingURL=modal.cjs.map
