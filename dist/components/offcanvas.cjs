"use strict";const e=require("./base-component-DMuoZh8G.js"),D=require("./dataBsDismiss-CMHF7If_.js"),E=require("./dataBsToggle-Dj-Ng54N.js"),c=require("./showClass-D_Ms1FgG.js"),r=require("./popupContainer-DsalI_IH.js"),a=require("./isVisible-D0QRTb09.js"),C=require("./getTargetElement-DananmHP.js"),$=require("./isDisabled-BhBg0EpT.js"),q=`.${r.offcanvasString}`,O=`[${E.dataBsToggle}="${r.offcanvasString}"]`,G=`[${D.dataBsDismiss}="${r.offcanvasString}"]`,d=`${r.offcanvasString}-toggling`,H={backdrop:!0,keyboard:!0,scroll:!1},f=o=>e.Xn(o,a.offcanvasComponent),k=o=>new S(o),v=e.po(`show.bs.${r.offcanvasString}`),T=e.po(`shown.bs.${r.offcanvasString}`),u=e.po(`hide.bs.${r.offcanvasString}`),w=e.po(`hidden.bs.${r.offcanvasString}`),B=o=>{const{element:t}=o,{clientHeight:s,scrollHeight:n}=e.w(t);a.setScrollbar(t,s!==n)},y=(o,t)=>{const s=t?e.E:e.r,n=e.d(o.element);s(n,e.lt,L),s(n,e.gt,I)},b=o=>{const{element:t,options:s}=o;s.scroll||(B(o),e.vo(e.wo(t),{overflow:"hidden"})),e.Kn(t,d),e.Kn(t,c.showClass),e.vo(t,{visibility:"visible"}),e.no(t,()=>P(o))},A=o=>{const{element:t,options:s}=o,n=a.getCurrentOpen(t);t.blur(),!n&&s.backdrop&&e.Gn(a.overlay,c.showClass)&&a.hideOverlay(),e.no(t,()=>Q(o))};function K(o){const t=C.getTargetElement(this),s=t&&f(t);$.isDisabled(this)||s&&(s.relatedTarget=this,s.toggle(),this.tagName==="A"&&o.preventDefault())}const I=o=>{const{target:t}=o,s=e.Ho(a.offcanvasActiveSelector,e.d(t));if(!s)return;const n=e.Ho(G,s),i=f(s);if(!i)return;const{options:l,triggers:g}=i,{backdrop:p}=l,h=e.Se(t,O),m=e.d(s).getSelection();a.overlay.contains(t)&&p==="static"||(!(m&&m.toString().length)&&(!s.contains(t)&&p&&(!h||g.includes(t))||n&&n.contains(t))&&(i.relatedTarget=n&&n.contains(t)?n:void 0,i.hide()),h&&h.tagName==="A"&&o.preventDefault())},L=({code:o,target:t})=>{const s=e.Ho(a.offcanvasActiveSelector,e.d(t)),n=s&&f(s);n&&n.options.keyboard&&o===e.fn&&(n.relatedTarget=void 0,n.hide())},P=o=>{const{element:t}=o;e.qn(t,d),e.Qn(t,e.$),e.Wn(t,e.ze,"true"),e.Wn(t,"role","dialog"),e.G(t,T),y(o,!0),e.ro(t),e.yo(t)},Q=o=>{const{element:t,triggers:s}=o;e.Wn(t,e.$,"true"),e.Qn(t,e.ze),e.Qn(t,"role"),e.vo(t,{visibility:""});const n=v.relatedTarget||s.find(a.isVisible);n&&e.ro(n),a.removeOverlay(t),e.G(t,w),e.qn(t,d),e.yo(t),a.getCurrentOpen(t)||y(o)};class S extends e.BaseComponent{static selector=q;static init=k;static getInstance=f;constructor(t,s){super(t,s);const{element:n}=this;this.triggers=[...e.ue(O,e.d(n))].filter(i=>C.getTargetElement(i)===n),this.relatedTarget=void 0,this._toggleEventListeners(!0)}get name(){return a.offcanvasComponent}get defaults(){return H}toggle(){e.Gn(this.element,c.showClass)?this.hide():this.show()}show(){const{element:t,options:s,relatedTarget:n}=this;let i=0;if(e.Gn(t,c.showClass)||(v.relatedTarget=n||void 0,T.relatedTarget=n||void 0,e.G(t,v),v.defaultPrevented))return;const l=a.getCurrentOpen(t);if(l&&l!==t){const g=f(l)||e.Xn(l,a.modalComponent);g&&g.hide()}s.backdrop?(r.hasPopup(a.overlay)?a.toggleOverlayType():a.appendOverlay(t,!0),i=e.ae(a.overlay),a.showOverlay(),setTimeout(()=>b(this),i)):(b(this),l&&e.Gn(a.overlay,c.showClass)&&a.hideOverlay())}hide(){const{element:t,relatedTarget:s}=this;e.Gn(t,c.showClass)&&(u.relatedTarget=s||void 0,w.relatedTarget=s||void 0,e.G(t,u),!u.defaultPrevented&&(e.Kn(t,d),e.qn(t,c.showClass),A(this)))}_toggleEventListeners=t=>{const s=t?e.E:e.r;this.triggers.forEach(n=>{s(n,e.gt,K)})};dispose(){const{element:t}=this,s=e.Gn(t,c.showClass),n=()=>setTimeout(()=>super.dispose(),1);this.hide(),this._toggleEventListeners(),s?e.no(t,n):n()}}module.exports=S;
//# sourceMappingURL=offcanvas.cjs.map
